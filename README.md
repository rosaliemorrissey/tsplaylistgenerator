# tsplaylistgenerator

The Python file defines a Binary Search Tree class and two other functions, create_playlist and main. The create_playlist function uses the Spotify API to create a playlist for a Taylor Swift concert, adding songs by the concert's openers and songs similar to the user's favorite song. The main function creates a Flask app that allows the user to input their concert date, openers, and favorite song, and calls the create_playlist function to create the playlist.

The code imports various libraries including spotipy, requests, and json. It also imports api_info which is a Python file that contains the client ID and secret for the Spotify API. The code defines a constant AUTH_URL which is the URL for the Spotify token authentication endpoint. It uses requests.post to obtain an access token, which is stored in the token variable. The access token is used in the headers variable to authorize API requests.

The BinarySearchTree class represents a binary search tree data structure, which is used to store dates with openers in the dates variable. The Node class is used to define the nodes in the tree. The insert method is used to insert a new date into the tree, while the _insert method is a recursive helper function that inserts the date into the appropriate position in the tree.

The create_playlist function first authenticates with the Spotify API using the SpotifyOAuth class from the spotipy.oauth2 module. It then creates a new playlist with a name and description that includes the concert date. The function adds songs by the concert's openers to the playlist by searching for the artist on Spotify and adding the three most popular tracks by the artist. It also adds songs similar to the user's favorite song by searching for the song on Spotify and adding tracks with a similar danceability. The cache variable is used to store the URIs of the openers' most popular tracks to avoid making redundant API requests.

The main function creates a Flask app and defines a form using the FlaskForm class from the flask_wtf module. The form allows the user to input their concert date, openers, and favorite song. When the form is submitted, the create_playlist function is called to create the playlist for the specified concert. The function returns a rendered HTML template that displays a message indicating whether the playlist was successfully created.
